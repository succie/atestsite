<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ä¼šå“¡ç™»éŒ² - äºˆç´„ã‚·ã‚¹ãƒ†ãƒ </title>
  <script type="text/javascript">
    (function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "sjt8px4zd6");
</script>
<script>
  window.clarity('set', 'pageID', 'member-registration');
</script>
<script src="https://js.ptengine.jp/448y81wd.js"></script>
<script type="text/javascript">
  window._mfq = window._mfq || [];
  (function() {
    var mf = document.createElement("script");
    mf.type = "text/javascript"; mf.defer = true;
    mf.src = "//cdn.mouseflow.com/projects/f1531bc1-b213-48e2-bb74-808f9d9206fd.js";
    document.getElementsByTagName("head")[0].appendChild(mf);
  })();
</script>

  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      padding: 20px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      color: #333;
    }
    .container {
      max-width: 800px;
      margin: 0 auto;
      background: white;
      border-radius: 15px;
      padding: 30px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    }
    .header {
      text-align: center;
      margin-bottom: 40px;
      padding: 20px;
      background: linear-gradient(45deg, #ff6b6b, #feca57);
      border-radius: 10px;
      color: white;
    }
    .breadcrumb {
      margin-bottom: 30px;
      padding: 15px;
      background: #f8f9fa;
      border-radius: 10px;
      font-size: 14px;
      color: #666;
    }
    .breadcrumb a {
      color: #3498db;
      text-decoration: none;
    }
    .selected-store {
      background: #e8f5e8;
      border: 1px solid #2ecc71;
      border-radius: 10px;
      padding: 15px;
      margin-bottom: 30px;
      text-align: center;
    }
    .form-section {
      background: #f8f9fa;
      padding: 30px;
      border-radius: 10px;
      margin: 30px 0;
    }
    .form-group {
      margin-bottom: 25px;
    }
    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
    }
    label {
      display: block;
      margin-bottom: 8px;
      font-weight: bold;
      color: #555;
    }
    .required {
      color: #e74c3c;
    }
    input, select, textarea {
      width: 100%;
      padding: 12px;
      border: 2px solid #ddd;
      border-radius: 8px;
      font-size: 16px;
      transition: border-color 0.3s ease;
      box-sizing: border-box;
    }
    input:focus, select:focus, textarea:focus {
      outline: none;
      border-color: #3498db;
    }
    .checkbox-group {
      display: flex;
      align-items: flex-start;
      gap: 10px;
      margin: 15px 0;
    }
    .checkbox-group input[type="checkbox"] {
      width: auto;
      margin: 0;
    }
    .checkbox-group label {
      margin: 0;
      font-weight: normal;
      cursor: pointer;
    }
    .btn {
      padding: 15px 30px;
      border: none;
      border-radius: 25px;
      cursor: pointer;
      font-size: 16px;
      font-weight: bold;
      transition: all 0.3s ease;
      text-decoration: none;
      display: inline-block;
      text-align: center;
    }
    .btn-primary {
      background: #3498db;
      color: white;
    }
    .btn-success {
      background: #2ecc71;
      color: white;
    }
    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    }
    .button-group {
      display: flex;
      gap: 15px;
      justify-content: center;
      margin-top: 30px;
    }
    .error-message {
      color: #e74c3c;
      font-size: 14px;
      margin-top: 5px;
      display: none;
    }
    .terms-section {
      background: #fff;
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 20px;
      margin: 20px 0;
      max-height: 200px;
      overflow-y: auto;
    }
    .terms-title {
      font-weight: bold;
      margin-bottom: 15px;
      color: #2c3e50;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>ğŸ‘¤ ä¼šå“¡ç™»éŒ²</h1>
      <p>äºˆç´„ã«å¿…è¦ãªæƒ…å ±ã‚’ã”å…¥åŠ›ãã ã•ã„</p>
    </div>

    <div class="breadcrumb">
      <a href="index.html">ãƒˆãƒƒãƒ—</a> > <a href="store-selection.html">åº—èˆ—é¸æŠ</a> > ä¼šå“¡ç™»éŒ²
    </div>

    <div class="selected-store" id="selectedStoreInfo">
      <strong>é¸æŠåº—èˆ—:</strong> <span id="storeName">æœªé¸æŠ</span>
    </div>

    <form id="memberForm" onsubmit="handleFormSubmit(event)" novalidate>
      <div class="form-section">
        <h2>åŸºæœ¬æƒ…å ±</h2>
        
        <div class="form-row">
          <div class="form-group">
            <label for="lastName">å§“ <span class="required">*</span></label>
            <input type="text" id="lastName" name="lastName" required placeholder="å±±ç”°">
            <div class="error-message" id="lastNameError">å§“ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</div>
          </div>
          <div class="form-group">
            <label for="firstName">å <span class="required">*</span></label>
            <input type="text" id="firstName" name="firstName" required placeholder="å¤ªéƒ">
            <div class="error-message" id="firstNameError">åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="lastNameKana">ã‚»ã‚¤ <span class="required">*</span></label>
            <input type="text" id="lastNameKana" name="lastNameKana" required placeholder="ãƒ¤ãƒãƒ€">
            <div class="error-message" id="lastNameKanaError">ã‚»ã‚¤ã‚’ã‚«ã‚¿ã‚«ãƒŠã§å…¥åŠ›ã—ã¦ãã ã•ã„</div>
          </div>
          <div class="form-group">
            <label for="firstNameKana">ãƒ¡ã‚¤ <span class="required">*</span></label>
            <input type="text" id="firstNameKana" name="firstNameKana" required placeholder="ã‚¿ãƒ­ã‚¦">
            <div class="error-message" id="firstNameKanaError">ãƒ¡ã‚¤ã‚’ã‚«ã‚¿ã‚«ãƒŠã§å…¥åŠ›ã—ã¦ãã ã•ã„</div>
          </div>
        </div>

        <div class="form-group">
          <label for="email">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ <span class="required">*</span></label>
          <input type="email" id="email" name="email" required placeholder="example@email.com">
          <div class="error-message" id="emailError">æ­£ã—ã„ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</div>
        </div>

        <div class="form-group">
          <label for="phone">é›»è©±ç•ªå· <span class="required">*</span></label>
          <input type="tel" id="phone" name="phone" required placeholder="090-1234-5678">
          <div class="error-message" id="phoneError">é›»è©±ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="birthDate">ç”Ÿå¹´æœˆæ—¥ <span class="required">*</span></label>
            <input type="date" id="birthDate" name="birthDate" required>
            <div class="error-message" id="birthDateError">ç”Ÿå¹´æœˆæ—¥ã‚’é¸æŠã—ã¦ãã ã•ã„</div>
          </div>
          <div class="form-group">
            <label for="gender">æ€§åˆ¥</label>
            <select id="gender" name="gender">
              <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
              <option value="male">ç”·æ€§</option>
              <option value="female">å¥³æ€§</option>
              <option value="other">ãã®ä»–</option>
              <option value="prefer-not-to-say">å›ç­”ã—ãŸããªã„</option>
            </select>
          </div>
        </div>
      </div>

      <div class="form-section">
        <h2>ä½æ‰€æƒ…å ±</h2>
        
        <div class="form-group">
          <label for="zipCode">éƒµä¾¿ç•ªå·</label>
          <input type="text" id="zipCode" name="zipCode" placeholder="123-4567" maxlength="8">
        </div>

        <div class="form-group">
          <label for="prefecture">éƒ½é“åºœçœŒ</label>
          <select id="prefecture" name="prefecture">
            <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
            <option value="tokyo">æ±äº¬éƒ½</option>
            <option value="kanagawa">ç¥å¥ˆå·çœŒ</option>
            <option value="chiba">åƒè‘‰çœŒ</option>
            <option value="saitama">åŸ¼ç‰çœŒ</option>
            <option value="other">ãã®ä»–</option>
          </select>
        </div>

        <div class="form-group">
          <label for="address">ä½æ‰€</label>
          <textarea id="address" name="address" rows="3" placeholder="å¸‚åŒºç”ºæ‘ãƒ»ç•ªåœ°ãƒ»å»ºç‰©åãªã©"></textarea>
        </div>
      </div>

      <div class="form-section">
        <h2>äºˆç´„è¨­å®š</h2>
        
        <div class="form-group">
          <label for="preferredTime">å¸Œæœ›æ™‚é–“å¸¯</label>
          <select id="preferredTime" name="preferredTime">
            <option value="">ç‰¹ã«ãªã—</option>
            <option value="morning">åˆå‰ (9:00-12:00)</option>
            <option value="afternoon">åˆå¾Œ (12:00-18:00)</option>
            <option value="evening">å¤œé–“ (18:00-21:00)</option>
          </select>
        </div>

        <div class="checkbox-group">
          <input type="checkbox" id="newsletter" name="newsletter" onchange="trackCheckbox('newsletter', this.checked)">
          <label for="newsletter">ãƒ¡ãƒ¼ãƒ«ãƒã‚¬ã‚¸ãƒ³ã‚’å—ã‘å–ã‚‹</label>
        </div>

        <div class="checkbox-group">
          <input type="checkbox" id="smsNotification" name="smsNotification" onchange="trackCheckbox('smsNotification', this.checked)">
          <label for="smsNotification">SMSé€šçŸ¥ã‚’å—ã‘å–ã‚‹</label>
        </div>
      </div>

      <div class="terms-section">
        <div class="terms-title">åˆ©ç”¨è¦ç´„</div>
        <p>æœ¬ã‚µãƒ¼ãƒ“ã‚¹ã®åˆ©ç”¨ã«ã‚ãŸã‚Šã€ä»¥ä¸‹ã®è¦ç´„ã«åŒæ„ã—ã¦ã„ãŸã ãå¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p>
        <p>1. å€‹äººæƒ…å ±ã®å–ã‚Šæ‰±ã„ã«ã¤ã„ã¦ï¼šãŠå®¢æ§˜ã‹ã‚‰ãŠé ã‹ã‚Šã—ãŸå€‹äººæƒ…å ±ã¯ã€äºˆç´„ç®¡ç†ãŠã‚ˆã³å„ç¨®ã”æ¡ˆå†…ã®ãŸã‚ã«ã®ã¿ä½¿ç”¨ã„ãŸã—ã¾ã™ã€‚</p>
        <p>2. äºˆç´„ã®ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã«ã¤ã„ã¦ï¼šäºˆç´„ã®ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã¯å‰æ—¥ã¾ã§ã«ãŠé¡˜ã„ã„ãŸã—ã¾ã™ã€‚</p>
        <p>3. ã‚µãƒ¼ãƒ“ã‚¹å†…å®¹ã®å¤‰æ›´ã«ã¤ã„ã¦ï¼šã‚µãƒ¼ãƒ“ã‚¹å†…å®¹ã¯äºˆå‘Šãªãå¤‰æ›´ã•ã‚Œã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚</p>
        <p>4. å…è²¬äº‹é …ï¼šå½“ç¤¾ã¯æœ¬ã‚µãƒ¼ãƒ“ã‚¹ã®åˆ©ç”¨ã«ã‚ˆã‚Šç”Ÿã˜ãŸæå®³ã«ã¤ã„ã¦ä¸€åˆ‡ã®è²¬ä»»ã‚’è² ã„ã¾ã›ã‚“ã€‚</p>
      </div>

      <div class="checkbox-group">
        <input type="checkbox" id="agreeTerms" name="agreeTerms" required onchange="validateForm()">
        <label for="agreeTerms">åˆ©ç”¨è¦ç´„ã«åŒæ„ã™ã‚‹ <span class="required">*</span></label>
      </div>
      <div class="error-message" id="termsError">åˆ©ç”¨è¦ç´„ã¸ã®åŒæ„ãŒå¿…è¦ã§ã™</div>

      <div class="button-group">
        <a href="store-selection.html" class="btn btn-primary">æˆ»ã‚‹</a>
        <button type="submit" class="btn btn-success" id="submitButton">ç¢ºèªç”»é¢ã¸</button>
      </div>
    </form>
  </div>

  <script>
    let selectedStore = null;

    // ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰æ™‚ã«é¸æŠåº—èˆ—ã‚’è¡¨ç¤º
    window.addEventListener('load', function() {
      selectedStore = localStorage.getItem('selectedStore');
      if (selectedStore) {
        const storeNames = {
          'shibuya': 'æ¸‹è°·åº—',
          'shinjuku': 'æ–°å®¿åº—', 
          'harajuku': 'åŸå®¿åº—',
          'ginza': 'éŠ€åº§åº—',
          'akasaka': 'èµ¤å‚åº—',
          'omotesando': 'è¡¨å‚é“åº—'
        };
        document.getElementById('storeName').textContent = storeNames[selectedStore] || selectedStore;
      }

      if (window.clarity) {
        clarity('event', 'member_registration_page_loaded', { selectedStore: selectedStore });
      }
      console.log('Member registration page loaded');
    });

    function validateForm() {
      const form = document.getElementById('memberForm');
      const submitButton = document.getElementById('submitButton');
      const agreeTerms = document.getElementById('agreeTerms').checked;
      
      // åŸºæœ¬çš„ãªãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®æ¤œè¨¼
      const requiredFields = ['lastName', 'firstName', 'lastNameKana', 'firstNameKana', 'email', 'phone', 'birthDate'];
      let isValid = true;
      
      requiredFields.forEach(field => {
        const input = document.getElementById(field);
        const errorDiv = document.getElementById(field + 'Error');
        
        if (!input.value.trim()) {
          isValid = false;
          if (errorDiv) errorDiv.style.display = 'block';
        } else {
          if (errorDiv) errorDiv.style.display = 'none';
        }
      });

      // åˆ©ç”¨è¦ç´„ã®åŒæ„ãƒã‚§ãƒƒã‚¯
      const termsError = document.getElementById('termsError');
      if (!agreeTerms) {
        isValid = false;
        termsError.style.display = 'block';
      } else {
        termsError.style.display = 'none';
      }

      submitButton.disabled = !isValid || !agreeTerms;
    }

    function trackCheckbox(name, checked) {
      console.log('Checkbox changed:', name, checked);
      if (window.clarity) {
        clarity('event', 'checkbox_change', { 
          checkbox: name, 
          checked: checked 
        });
      }
    }

    function handleFormSubmit(event) {
      event.preventDefault();
      
      // ãƒ•ã‚©ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã®åé›†
      const formData = new FormData(event.target);
      const data = Object.fromEntries(formData);
      data.selectedStore = selectedStore;
      
      // ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
      validateForm();
      if (document.getElementById('submitButton').disabled) {
        alert('å¿…é ˆé …ç›®ã‚’å…¥åŠ›ã—ã€åˆ©ç”¨è¦ç´„ã«åŒæ„ã—ã¦ãã ã•ã„');
        return;
      }
      
      console.log('Member registration form submitted:', data);
      
      if (window.clarity) {
        clarity('event', 'member_registration_submit', { 
          selectedStore: selectedStore,
          newsletter: data.newsletter ? 'yes' : 'no',
          smsNotification: data.smsNotification ? 'yes' : 'no',
          gender: data.gender || 'not-specified',
          prefecture: data.prefecture || 'not-specified'
        });
      }
      
      // ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ä¿å­˜
      localStorage.setItem('memberData', JSON.stringify(data));
      
      // ç¢ºèªç”»é¢ã¸é·ç§»
      window.location.href = 'confirmation.html';
    }

    // ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
    document.addEventListener('DOMContentLoaded', function() {
      const inputs = document.querySelectorAll('input, select');
      inputs.forEach(input => {
        input.addEventListener('input', validateForm);
        input.addEventListener('change', validateForm);
      });
    });
  </script>
</body>
</html>